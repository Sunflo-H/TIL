## ✅ CDN(Content Delivery Network)이란?

> <b>Content Delivery Network</b>  
> 직역: 컨텐츠 배달 네트워크
> 물리적으로 멀리 떨어진 사용자에게 컨텐츠를 배달하기 위한 네트워크 기술  
> 전 세계에 분산된 서버 네트워크를 통해 콘텐츠를 효율적으로 전송하는 서비스

## 🤔 어떻게 배달을 하길래 효율적인거지? 원리가 뭘까?

블리자드를 예로 들어보자  
블리자드 미국 본사에 내 정보가 있다.  
로그인 할 때마다 매번 미국까지 가서 데이터가 있는지 확인하는 것은 시간이 오래걸린다.  
그러면 블리자드 코리아에 데이터를 저장하면 어떨까?  
제일 처음하는 로그인은 어쩔수 없이 미국에서 데이터를 가지고 오지만 미국 -> 코리아 -> 사용자 이런 데이터 전송과정에서 미국에서 가지고온 데이터를 코리아에 저장하여  
그 이후 로그인부터는 미국까지 갈 필요 없이 코리아만 가면 되는것이다.

<b>CDN의 동작을 살펴보면 다음과 같은 규칙으로 수행된다.</b>

1. 최초 요청은 서버로부터 컨텐츠를 가져와 고객에게 전송하며 동시에 CDN 캐싱장비에 저장한다.
2. 최초 요청 이후로의 요청은 CDN 에서 지정하는 해당 컨텐츠 만료 시점까지 캐싱[^1]된 컨텐츠를 전송한다.
3. 자주 사용하는 페이지에 한해서 캐싱되며, 해당 컨텐츠 호출이 없을 경우 주기적으로 삭제된다.
4. 서버가 파일을 찾는데 실패하는 경우 CDN 플랫폼의 다른 서버에서 컨텐츠를 찾은다음 엔드유저에게 응답을 전송한다.
5. 컨텐츠를 사용할 수 없거나 오래된 경우 CDN은 향후 요청에 대해 응답할 수 있도록 새로운 컨텐츠를 저장한다.

## CDN의 캐싱 방식

<b>Static Caching</b>

- Origin Server 에 있는 Content를 운영자가 미리 Cache Server에 복사 해두어 사용자가 Cache Server에 Content 요청 시 무조건 Cache Server에 있다
- 대부분의 국내 CDN에서 이 방식을 사용 (게임 클라이언트 다운로드 등)

<b>Dynamic Caching</b>

- Origin Server에 있는 Content를 운영자가 미리 Cache Server에 복사하지 않음
- 사용자가 Content를 요청 시 해당 Content가 없는 경우 Origin Server로부터 다운로드 받아 전달한다. 있는 경우에는 캐싱된 Content전달
- 각각의 Content는 일정 시간 이후 Cache Server에서 삭제 될 수도 있다.

[1]캐시: 동일한 데이터에 반복해서 접근해야 하거나 많은 연산이 필요한 일일때, 결과를 빠르게 이용하고자 성능이 좋은 혹은 가까운 곳에 저장하는 것 -> 캐싱은 캐시를 사용하는 것
